const fs = require('fs');
const { argv } = require('yargs/yargs')(process.argv.slice(2));
const pathResolver = require('./pathResolver');

const { runPostInstall } = argv;
const root = pathResolver.getProjectRootAbsolutePath();
const source = `${root}/lib/imports/`;

if (!fs.existsSync(`${root}/.no-postinstall`)) {
    fs.readdir(source, (err, files) => {
        files.forEach(file => {
            fs.copyFileSync(`${source}/${file}`, `${root}/${file}`);
        });
    });
} else if (runPostInstall) {
    fs.readdir(source, (err, files) => {
        files.forEach(file => {
            fs.copyFileSync(`${source}/${file}`, `${root}/lib/${file}`);
        });
    });
}
