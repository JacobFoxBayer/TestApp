{"version":3,"file":"index.es.js","sources":["../generated/propTypes.js","../FileUpload.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n/**\n *\n * This file is automatically generated by the Element\n * documentation system. Any modifications to this file\n * will be overwritten!\n *\n */\n\nexport const FileUploadPropTypes = {\n  /**\n   * Content to be rendered inside the button. Can be used instead `label` of to provide more flexibility. Accepts any valid markup. _Warning, if Label is set, it will be used instead of child content._\n   *\n   * Defaults to **null**.\n   */\n  children: PropTypes.node,\n  /**\n   * The css class name to be passed through to the component markup.\n   *\n   * Defaults to **undefined**.\n   */\n  className: PropTypes.string,\n  /**\n   * Prevent the user from interacting with the component.\n   *\n   * Defaults to **false**.\n   */\n  disabled: PropTypes.bool,\n  /**\n   * Randomly generated id. May be overwritten.\n   *\n   * Defaults to **undefined**.\n   */\n  id: PropTypes.string,\n  /**\n   * Label to be displayed on the button.\n   *\n   * Defaults to **null**.\n   */\n  label: PropTypes.string,\n  /**\n   * Allows for multiple files to be uploaded.\n   *\n   * Defaults to **false**.\n   */\n  multiple: PropTypes.bool,\n  /**\n   * Fired when file input's value is changed\n   *\n   * Defaults to **null**.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Placeholder text for the file name readonly input.\n   *\n   * Defaults to **'No File Chosen'**.\n   */\n  placeholder: PropTypes.string,\n  /**\n   * Override the default (`primary`) color with the `secondary` color. Most commonly used when the control is placed on a darker surface.\n   *\n   * Defaults to **'primary'**.\n   */\n  themeColor: PropTypes.oneOf([\"primary\", \"secondary\"]),\n};\n\nexport const FileUploadDefaultProps = {\n  children: null,\n  className: undefined,\n  disabled: false,\n  id: undefined,\n  label: null,\n  multiple: false,\n  placeholder: \"No File Chosen\",\n  themeColor: \"primary\",\n};\n","import React, {\n    useRef,\n    useMemo,\n    useCallback,\n    useState,\n    forwardRef,\n    useImperativeHandle\n} from 'react';\nimport clsx from 'clsx';\nimport { addClass } from '@element/react-common';\nimport { edsRandomId } from '@element/shared';\nimport { Icon } from '@element/react-icon';\nimport {\n    FileUploadPropTypes,\n    FileUploadDefaultProps\n} from './generated/propTypes';\n\nconst FileUpload = forwardRef((props, externalRef) => {\n    const {\n        children,\n        className,\n        disabled,\n        id,\n        label,\n        leadingIcon,\n        multiple,\n        onChange,\n        placeholder,\n        themeColor,\n        trailingIcon,\n        ...customProps\n    } = props;\n\n    const [idActual] = useState(() => id || edsRandomId());\n    const urlInputRef = useRef();\n    const btnRef = useRef();\n    const inputRef = useRef();\n    const content = useMemo(() => label || children, [label, children]);\n\n    const hasTrailingIcon = useMemo(\n        () => trailingIcon && !leadingIcon,\n        [leadingIcon, trailingIcon]\n    );\n\n    const clear = useCallback(() => {\n        urlInputRef.current.value = '';\n        inputRef.current.value = '';\n    }, []);\n\n    useImperativeHandle(\n        externalRef,\n        () => ({\n            clear,\n            btnRef: btnRef.current,\n            urlInput: urlInputRef.current,\n            input: inputRef.current\n        }),\n        [clear]\n    );\n\n    const LeadingIcon = useCallback(() => {\n        if (typeof leadingIcon === 'string') {\n            return (\n                <Icon\n                    tabIndex={0}\n                    role='button'\n                    className='mdc-button__icon lmnt-button__icon--leading'\n                    icon={leadingIcon}\n                />\n            );\n        }\n        if (typeof leadingIcon === 'function') {\n            return leadingIcon({\n                className: 'mdc-button__icon lmnt-button__icon--leading'\n            });\n        }\n        return addClass(\n            leadingIcon,\n            'mdc-button__icon lmnt-button__icon--leading'\n        );\n    }, [leadingIcon]);\n\n    const TrailingIcon = useCallback(() => {\n        if (typeof trailingIcon === 'string') {\n            return (\n                <Icon\n                    tabIndex={0}\n                    role='button'\n                    className='mdc-button__icon lmnt-button__icon--trailing'\n                    icon={trailingIcon}\n                />\n            );\n        }\n        if (typeof leadingIcon === 'function') {\n            return trailingIcon({\n                className: 'mdc-button__icon lmnt-button__icon--trailing'\n            });\n        }\n        return addClass(\n            trailingIcon,\n            'mdc-button__icon lmnt-button__icon--trailing'\n        );\n    }, [leadingIcon, trailingIcon]);\n\n    const classes = useMemo(\n        () =>\n            clsx(\n                'lmnt',\n                'lmnt-file-upload',\n                multiple && 'lmnt-file-upload--multiple',\n                disabled && 'lmnt-file-upload--disabled',\n                themeColor === 'primary' && 'lmnt-file-upload--primary',\n                themeColor === 'secondary' && 'lmnt-file-upload--secondary',\n                className\n            ),\n        [className, disabled, multiple, themeColor]\n    );\n\n    const btnClasses = useMemo(\n        () =>\n            clsx(\n                'lmnt',\n                'mdc-button',\n                'mdc-button--touch',\n                'mdc-button--outlined',\n                themeColor === 'primary' && 'lmnt-button--outlined-primary',\n                themeColor === 'secondary' && 'lmnt-button--outlined-secondary',\n                className\n            ),\n        [className, themeColor]\n    );\n\n    const handleChange = useCallback(\n        e => {\n            if (multiple) {\n                const vals = Array.from(e.target.files).map(f => f.name);\n                urlInputRef.current.value = vals;\n            } else {\n                urlInputRef.current.value = e.target.files[0].name;\n            }\n            onChange && onChange(e.target.files, e);\n        },\n        [onChange, multiple]\n    );\n\n    return (\n        <div className={classes}>\n            <div className='mdc-touch-target-wrapper lmnt-file-upload__btn'>\n                <button\n                    type='button'\n                    className={btnClasses}\n                    onChange={handleChange}\n                    disabled={disabled}\n                    ref={btnRef}\n                >\n                    <div className='mdc-button__ripple' />\n                    {leadingIcon && LeadingIcon()}\n                    <span className='mdc-button__label'>{content}</span>\n                    <input\n                        {...customProps}\n                        id={idActual}\n                        className='lmnt lmnt-file-upload__input'\n                        multiple={multiple}\n                        type='file'\n                        ref={inputRef}\n                    />\n                    {hasTrailingIcon && TrailingIcon()}\n                    <div className='mdc-button__touch' />\n                </button>\n            </div>\n            <input\n                ref={urlInputRef}\n                placeholder={placeholder}\n                type='text'\n                className='lmnt lmnt-file-upload__file-url mdc-typography--caption'\n                readOnly\n            />\n        </div>\n    );\n});\n\nFileUpload.displayName = 'FileUpload';\nFileUpload.propTypes = FileUploadPropTypes;\nFileUpload.defaultProps = FileUploadDefaultProps;\n\nexport default FileUpload;\n"],"names":["FileUploadPropTypes","children","PropTypes","node","className","string","disabled","bool","id","label","multiple","onChange","func","placeholder","themeColor","oneOf","FileUploadDefaultProps","undefined","FileUpload","forwardRef","props","externalRef","leadingIcon","trailingIcon","customProps","idActual","useState","edsRandomId","urlInputRef","useRef","btnRef","inputRef","content","useMemo","hasTrailingIcon","clear","useCallback","current","value","useImperativeHandle","urlInput","input","LeadingIcon","React","createElement","Icon","tabIndex","role","icon","addClass","TrailingIcon","classes","clsx","btnClasses","handleChange","e","vals","Array","from","target","files","map","f","name","type","ref","_extends","readOnly","displayName","propTypes","defaultProps"],"mappings":"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"}