import React, { forwardRef, useState, useRef, useImperativeHandle, useEffect } from 'react';
import ReactDOM from 'react-dom';
import { edsQuerySelector } from '@element/react-common';
import PropTypes from 'prop-types';

/**
 *
 * This file is automatically generated by the Element
 * documentation system. Any modifications to this file
 * will be overwritten!
 *
 */

const PortalPropTypes = {
  /**
   * Content to be rendered inside the portal.
   *
   * Defaults to **null**.
   */
  children: PropTypes.node,
  /**
   * Disables the portal to rendering children in the natural flow of the DOM.
   *
   * Defaults to **false**.
   */
  disabled: PropTypes.bool,
  /**
   * The DOM element the children will render in. If a string is sent it should be a valid DOM query selector. If one is not sent, Portal will default to `document.body`.
   *
   * Defaults to **'document.body'**.
   */
  portalContainer: PropTypes.oneOfType([PropTypes.string, PropTypes.node])
};
const PortalDefaultProps = {
  children: null,
  disabled: false,
  portalContainer: "document.body"
};

const Portal = /*#__PURE__*/forwardRef((props, externalRef) => {
  const [containerState, setContainer] = useState(document.body);
  const {
    children,
    container,
    disabled
  } = props;
  const ref = useRef();
  useImperativeHandle(externalRef, () => ref.current, []);
  useEffect(() => {
    if (typeof container === 'string') {
      if (container === 'document.body') {
        setContainer(document.body);
      } else {
        const elem = edsQuerySelector(container);
        setContainer(elem || document.body);
      }
    } else {
      setContainer(container || document.body);
    }
  }, [container]);
  return (
    /*#__PURE__*/
    // eslint-disable-next-line react/jsx-no-useless-fragment
    React.createElement(React.Fragment, null, disabled ? children : /*#__PURE__*/ReactDOM.createPortal(children, containerState))
  );
});
Portal.displayName = 'Portal';
Portal.propTypes = PortalPropTypes;
Portal.defaultProps = PortalDefaultProps;
var Portal$1 = /*#__PURE__*/React.memo(Portal);

export { Portal$1 as Portal };
//# sourceMappingURL=index.es.js.map
