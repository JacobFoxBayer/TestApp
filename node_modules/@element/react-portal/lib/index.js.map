{"version":3,"file":"index.js","sources":["../generated/propTypes.js","../Portal.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n/**\n *\n * This file is automatically generated by the Element\n * documentation system. Any modifications to this file\n * will be overwritten!\n *\n */\n\nexport const PortalPropTypes = {\n  /**\n   * Content to be rendered inside the portal.\n   *\n   * Defaults to **null**.\n   */\n  children: PropTypes.node,\n  /**\n   * Disables the portal to rendering children in the natural flow of the DOM.\n   *\n   * Defaults to **false**.\n   */\n  disabled: PropTypes.bool,\n  /**\n   * The DOM element the children will render in. If a string is sent it should be a valid DOM query selector. If one is not sent, Portal will default to `document.body`.\n   *\n   * Defaults to **'document.body'**.\n   */\n  portalContainer: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n};\n\nexport const PortalDefaultProps = {\n  children: null,\n  disabled: false,\n  portalContainer: \"document.body\",\n};\n","import React, {\n    useRef,\n    useEffect,\n    useState,\n    forwardRef,\n    useImperativeHandle\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport { edsQuerySelector } from '@element/react-common';\nimport { PortalPropTypes, PortalDefaultProps } from './generated/propTypes';\n\nconst Portal = forwardRef((props, externalRef) => {\n    const [containerState, setContainer] = useState(document.body);\n    const { children, container, disabled } = props;\n\n    const ref = useRef();\n\n    useImperativeHandle(externalRef, () => ref.current, []);\n\n    useEffect(() => {\n        if (typeof container === 'string') {\n            if (container === 'document.body') {\n                setContainer(document.body);\n            } else {\n                const elem = edsQuerySelector(container);\n                setContainer(elem || document.body);\n            }\n        } else {\n            setContainer(container || document.body);\n        }\n    }, [container]);\n\n    return (\n        // eslint-disable-next-line react/jsx-no-useless-fragment\n        <>\n            {disabled\n                ? children\n                : ReactDOM.createPortal(children, containerState)}\n        </>\n    );\n});\n\nPortal.displayName = 'Portal';\nPortal.propTypes = PortalPropTypes;\nPortal.defaultProps = PortalDefaultProps;\n\nexport default React.memo(Portal);\n"],"names":["PortalPropTypes","children","PropTypes","node","disabled","bool","portalContainer","oneOfType","string","PortalDefaultProps","Portal","forwardRef","props","externalRef","containerState","setContainer","useState","document","body","container","ref","useRef","useImperativeHandle","current","useEffect","elem","edsQuerySelector","React","createElement","Fragment","ReactDOM","createPortal","displayName","propTypes","defaultProps","memo"],"mappings":";;;;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,MAAMA,eAAe,GAAG;AAC7B;AACF;AACA;AACA;AACA;EACEC,QAAQ,EAAEC,6BAAS,CAACC,IAAI;AACxB;AACF;AACA;AACA;AACA;EACEC,QAAQ,EAAEF,6BAAS,CAACG,IAAI;AACxB;AACF;AACA;AACA;AACA;AACEC,EAAAA,eAAe,EAAEJ,6BAAS,CAACK,SAAS,CAAC,CAACL,6BAAS,CAACM,MAAM,EAAEN,6BAAS,CAACC,IAAI,CAAC,CAAA;AACzE,CAAC,CAAA;AAEM,MAAMM,kBAAkB,GAAG;AAChCR,EAAAA,QAAQ,EAAE,IAAI;AACdG,EAAAA,QAAQ,EAAE,KAAK;AACfE,EAAAA,eAAe,EAAE,eAAA;AACnB,CAAC;;ACzBD,MAAMI,MAAM,gBAAGC,gBAAU,CAAC,CAACC,KAAK,EAAEC,WAAW,KAAK;EAC9C,MAAM,CAACC,cAAc,EAAEC,YAAY,CAAC,GAAGC,cAAQ,CAACC,QAAQ,CAACC,IAAI,CAAC,CAAA;EAC9D,MAAM;IAAEjB,QAAQ;IAAEkB,SAAS;AAAEf,IAAAA,QAAAA;AAAS,GAAC,GAAGQ,KAAK,CAAA;EAE/C,MAAMQ,GAAG,GAAGC,YAAM,EAAE,CAAA;EAEpBC,yBAAmB,CAACT,WAAW,EAAE,MAAMO,GAAG,CAACG,OAAO,EAAE,EAAE,CAAC,CAAA;AAEvDC,EAAAA,eAAS,CAAC,MAAM;AACZ,IAAA,IAAI,OAAOL,SAAS,KAAK,QAAQ,EAAE;MAC/B,IAAIA,SAAS,KAAK,eAAe,EAAE;AAC/BJ,QAAAA,YAAY,CAACE,QAAQ,CAACC,IAAI,CAAC,CAAA;AAC/B,OAAC,MAAM;AACH,QAAA,MAAMO,IAAI,GAAGC,4BAAgB,CAACP,SAAS,CAAC,CAAA;AACxCJ,QAAAA,YAAY,CAACU,IAAI,IAAIR,QAAQ,CAACC,IAAI,CAAC,CAAA;AACvC,OAAA;AACJ,KAAC,MAAM;AACHH,MAAAA,YAAY,CAACI,SAAS,IAAIF,QAAQ,CAACC,IAAI,CAAC,CAAA;AAC5C,KAAA;AACJ,GAAC,EAAE,CAACC,SAAS,CAAC,CAAC,CAAA;AAEf,EAAA;AAAA;AACI;AACAQ,IAAAA,yBAAA,CAAAC,aAAA,CAAAD,yBAAA,CAAAE,QAAA,QACKzB,QAAQ,GACHH,QAAQ,gBACR6B,4BAAQ,CAACC,YAAY,CAAC9B,QAAQ,EAAEa,cAAc,CAAC,CAAA;AACtD,IAAA;AAEX,CAAC,CAAC,CAAA;AAEFJ,MAAM,CAACsB,WAAW,GAAG,QAAQ,CAAA;AAC7BtB,MAAM,CAACuB,SAAS,GAAGjC,eAAe,CAAA;AAClCU,MAAM,CAACwB,YAAY,GAAGzB,kBAAkB,CAAA;AAExC,eAAA,aAAekB,yBAAK,CAACQ,IAAI,CAACzB,MAAM,CAAC;;;;"}