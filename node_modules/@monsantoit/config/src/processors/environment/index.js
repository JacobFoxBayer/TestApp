const fromPairs = require('lodash/fromPairs')
const get = require('lodash/get')

module.exports = {
    getEnvironmentVariables(keys) {
        return fromPairs(
            keys.map((k) => {
                const [key, ...path] = k.split('/')
                if (path.length === 0) {
                    return [k, process.env[key]]
                } else {
                    const json = JSON.parse(process.env[key])
                    if (path.length === 1 && path[0] === '') {
                        return [k, json]
                    } else {
                        return [k, get(json, path)]
                    }
                }
            })
        )
    }
}
