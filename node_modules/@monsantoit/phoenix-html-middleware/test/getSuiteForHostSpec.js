const getSuiteForHost = require('../src/getSuiteForHost')

describe('getSuiteForHost', () => {
    const altMap = {bob: ['stuff.net']}
    it('get velocity', () => {
        getSuiteForHost('velocity.ag').should.equal('velocity')
        getSuiteForHost('velocity-np.ag').should.equal('velocity')
        getSuiteForHost('beta.velocity.ag').should.equal('velocity-beta')
    })

    it('get devtools', () => {
        getSuiteForHost('devtools.monsanto.net').should.equal('devtools')
        getSuiteForHost('devtools-np.monsanto.net').should.equal('devtools')
    })

    it('get peadmin', () => {
        getSuiteForHost('peadmin.monsanto.net').should.equal('pe-admin')
        getSuiteForHost('peadmin-np.monsanto.net').should.equal('pe-admin')
    })

    it('from alternate map', () => {
        getSuiteForHost('stuff.net', altMap).should.equal('bob')
        getSuiteForHost('stuff.net', {bob: 'stuff.net'}).should.equal('bob')
    })

    it('guessing from suite name', () => {
        getSuiteForHost('bob.monsanto.net', altMap).should.equal('bob')
        getSuiteForHost('stuff.bob.net', altMap).should.equal('bob')
        getSuiteForHost('gamma.velocity.ag', altMap).should.equal('velocity')
        getSuiteForHost('bob.velocity.ag', altMap).should.equal('velocity')
    })

    it('nothing found', () => {
        getSuiteForHost('zzz.yyy.xxx', altMap).should.equal('devtools')
        getSuiteForHost('zzz.yyy.xxx', altMap, 'velocity').should.equal('velocity')
    })
})
