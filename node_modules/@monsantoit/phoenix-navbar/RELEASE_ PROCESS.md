
Things to note:
* there is only 1 S3 bucket for both prod and non-prod. Deployments are handled by asking for a specific version
* style changes to the navbar are not deployed from this project. They are inherited by the stylesheets for the suite. So there is an additional deployment step (described below) for any CSS changes made to the navbar.

# Local Testing

Be sure to test from the demo project. 

# Creating a Release Candidate & Testing in NonProd

When you commit to master, the navbar changes are deployed to s3 as a 'candidate' version. You can use the 'version' property in the navbar config to specifically ask for this version, and there isn't any other way to get it. The Playground app already does this. Keep in mind this only applies to the Javascript. Navbar styles need to be built at the suite-level (see below).

This Jenkins job also deploys [the navbar demo project](https://navbar.phoenix-tools-np.io/velocity) to nonprod

# Build a versioned Release

Manually run the Jenkins job 'Release Phoenix Navbar'. This builds a version of the navbar with a specific version number and publishes it.  Still at this point, only projects hard-coded to get the 'latest' will pick up this version. No one should be doing this other than demo apps. Most applications will pick up the navbar version assigned to their suite (see below). 

# Updating Suite Styles

Each Suite's styles should have their own Jenkins job. Those jobs should get the latest published versions and the latest material versions as part of their build process.  They also publish to s3. We will need to run these for each suite, but first, we will need to bump the versions. That will need to be done manually from your local machine. Defer to the instructions in the README.md for the project, but it should be something like this:

    update the navbar dependency version in package.json

then

    > cd styles
    > npm i
    > npm run webpack:navbar
    > npm version patch
    > npm publish

Now it's safe to run the suite builds (which will publish the suite styles).

WARNING - be aware that currently the suite builds may quietly fail because they don't see any differences in material versions. that's because these scripts are doing two different things and should be split apart. To get around this, you can use the 'Force Update' options from the 'build with parameters' screen in Jenkins.

# Assign the Navbar version to the suite

Test each suite to make sure the suite's css has picked up your navbar css changes appropriately. To do this, you will need to configure a project to point to a specific navbar version. This can be done locally. 

Assign the new navbar version to the appropriate suites in the navigation app's [Manage Navbar Versions](https://devtools.bayer.com/navigation/suite/manage-navbars) page.
