//
// Copyright 2017 Google Inc. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

@import './keyframes';
@import './mixins';
@import './variables';
@import '../animation/variables';
@import '../line-ripple/line-ripple';
@import '../notched-outline/notched-outline';
@import '../floating-label/floating-label';
@import '../typography/mixins';
@import '../ripple/common';
@import '../ripple/mixins';
@import '../rtl/mixins';

// postcss-bem-linter: define select
.phoenix-mdc-select {
    @include phoenix-mdc-select-container-fill-color(transparent);
    @include phoenix-mdc-select-dd-arrow-svg-bg_;
    @include phoenix-mdc-select-ink-color($phoenix-mdc-select-ink-color);
    @include phoenix-mdc-select-label-color($phoenix-mdc-select-label-color);
    @include phoenix-mdc-select-bottom-line-color($phoenix-mdc-select-bottom-line-idle-color);

    // Focused state colors
    @include phoenix-mdc-select-focused-bottom-line-color(primary);
    @include phoenix-mdc-select-focused-label-color($phoenix-mdc-select-focused-label-color);

    // Hover state colors
    @include phoenix-mdc-select-hover-bottom-line-color(
        $phoenix-mdc-select-bottom-line-hover-color
    );

    display: inline-flex;
    position: relative;
    box-sizing: border-box;
    height: 52px;
    background-repeat: no-repeat;
    background-position: right 8px bottom 12px;

    @include phoenix-mdc-rtl {
        background-position: left 8px bottom 12px;
    }

    &__native-control {
        @include phoenix-mdc-rtl-reflexive-property(padding, 0, $phoenix-mdc-select-arrow-padding);
        @include phoenix-mdc-typography(subtitle1);

        &::-ms-expand {
            display: none;
        }

        // counteracts the extra text padding that Firefox adds by default
        @-moz-document url-prefix("") {
            text-indent: -2px;
        }

        width: 100%;
        padding-top: 20px;
        padding-bottom: 4px;
        border: none;
        border-bottom: 1px solid;
        border-radius: 0;
        outline: none;
        background-color: transparent;
        white-space: nowrap;
        cursor: pointer;
        appearance: none;
    }

    // stylelint-disable-next-line plugin/selector-bem-pattern
    .phoenix-mdc-floating-label {
        pointer-events: none;
    }

    @include phoenix-mdc-select-focused-line-ripple_ {
        &::after {
            transform: scale(1, 2);
            opacity: 1;
        }
    }
}

.phoenix-mdc-select--box {
    @include phoenix-mdc-select-container-fill-color($phoenix-mdc-select-box-fill-color);
    @include phoenix-mdc-ripple-surface;
    @include phoenix-mdc-ripple-radius-bounded;
    // Select Box intentionally omits press ripple, so each state needs to be specified individually
    @include phoenix-mdc-states-base-color($phoenix-mdc-select-ink-color);
    @include phoenix-mdc-states-hover-opacity(
        phoenix-mdc-states-opacity($phoenix-mdc-select-ink-color, hover)
    );
    @include phoenix-mdc-states-focus-opacity(
        phoenix-mdc-states-opacity($phoenix-mdc-select-ink-color, focus),
        $has-nested-focusable-element: true
    );

    height: 56px;
    border-radius: 4px 4px 0 0;
    background-position: right 10px center;
    overflow: hidden;

    @include phoenix-mdc-rtl {
        background-position: left 10px center;
    }

    .phoenix-mdc-select__native-control {
        @include phoenix-mdc-rtl-reflexive-property(
            padding,
            $phoenix-mdc-select-label-padding,
            $phoenix-mdc-select-arrow-padding
        );

        height: 56px;
        border-radius: 4px 4px 0 0;
    }

    // stylelint-disable plugin/selector-bem-pattern
    .phoenix-mdc-floating-label {
        @include phoenix-mdc-rtl-reflexive-position(left, 16px);

        bottom: 12px;
        line-height: 1.75rem;

        &--float-above {
            transform: translateY(-40%) scale(0.75, 0.75);
        }
    }
    // stylelint-enable plugin/selector-bem-pattern
}

.phoenix-mdc-select--outlined {
    @include phoenix-mdc-select-outline-color($phoenix-mdc-select-outlined-idle-border);
    @include phoenix-mdc-select-hover-outline-color($phoenix-mdc-select-outlined-hover-border);
    @include phoenix-mdc-select-focused-outline-color(primary);
    @include phoenix-mdc-floating-label-float-position(
        $phoenix-mdc-select-outlined-label-position-y
    );
    @include phoenix-mdc-floating-label-shake-animation(text-field-outlined);
    @include phoenix-mdc-select-outline-corner-radius($phoenix-mdc-select-border-radius);

    height: 56px;
    border: none;
    background-position: right 10px center;

    @include phoenix-mdc-rtl {
        background-position: left 10px center;
    }

    .phoenix-mdc-select__native-control {
        @include phoenix-mdc-rtl-reflexive-property(
            padding,
            $phoenix-mdc-select-label-padding,
            $phoenix-mdc-select-arrow-padding
        );

        display: flex;
        padding-top: 12px;
        padding-bottom: 12px;
        border: none;
        background-color: transparent;
        z-index: 1;
    }

    // stylelint-disable-next-line plugin/selector-bem-pattern
    .phoenix-mdc-floating-label {
        @include phoenix-mdc-rtl-reflexive-position(left, 16px);

        position: absolute;
        bottom: 20px;
    }
}

.phoenix-mdc-select--disabled {
    @include phoenix-mdc-select-dd-arrow-svg-bg_($phoenix-mdc-select-disabled-arrow-color);

    .phoenix-mdc-floating-label {
        @include phoenix-mdc-floating-label-ink-color($phoenix-mdc-select-disabled-label-color);
    }

    // stylelint-disable plugin/selector-bem-pattern
    .phoenix-mdc-line-ripple {
        display: none;
    }

    .phoenix-mdc-select__native-control {
        border-bottom-style: dotted;
    }
    // stylelint-enable plugin/selector-bem-pattern

    &.phoenix-mdc-select--box {
        @include phoenix-mdc-select-container-fill-color_(
            $phoenix-mdc-select-box-disabled-fill-color
        );
    }

    &.phoenix-mdc-select--outlined {
        // stylelint-disable-next-line plugin/selector-bem-pattern
        .phoenix-mdc-select__native-control {
            border-bottom-style: none;
        }

        @include phoenix-mdc-select-outline-color_($phoenix-mdc-select-outlined-disabled-border);
    }

    opacity: 0.38;
    cursor: default;
    pointer-events: none;
}
