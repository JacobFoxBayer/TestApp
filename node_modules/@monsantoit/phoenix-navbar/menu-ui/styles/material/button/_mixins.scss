@import '../elevation/mixins';
@import '../ripple/mixins';
@import '../rtl/mixins';
@import '../theme/functions';
@import '../theme/mixins';
@import '../typography/mixins';
@import './variables';

@mixin phoenix-mdc-button-filled-accessible($container-fill-color) {
    $fill-tone: phoenix-mdc-theme-tone($container-fill-color);

    @include phoenix-mdc-button-container-fill-color($container-fill-color);

    @if ($fill-tone == 'dark') {
        @include mdc-button-ink-color(text-primary-on-dark);
        @include mdc-states(text-primary-on-dark);
    } @else {
        @include phoenix-mdc-button-ink-color(text-primary-on-light);
        @include phoenix-mdc-states(text-primary-on-light);
    }
}

@mixin phoenix-mdc-button-container-fill-color($color) {
    // :not(:disabled) is used to support link styled as button
    // as link does not support :enabled style
    &:not(:disabled) {
        @include phoenix-mdc-theme-prop(background-color, $color, $edgeOptOut: true);
    }
}

@mixin phoenix-mdc-button-outline-color($color) {
    &:not(:disabled) {
        @include phoenix-mdc-theme-prop(border-color, $color);
    }
}

@mixin phoenix-mdc-button-icon-color($color) {
    &:not(:disabled) .phoenix-mdc-button__icon {
        @include phoenix-mdc-theme-prop(color, $color);
    }
}

@mixin phoenix-mdc-button-ink-color($color) {
    &:not(:disabled) {
        @include phoenix-mdc-theme-prop(color, $color);
    }
}

@mixin phoenix-mdc-button-corner-radius($corner-radius) {
    border-radius: $corner-radius;
}

@mixin phoenix-mdc-button-horizontal-padding($padding) {
    // $padding should be a single value; enforce it by specifying all 4 sides in the output
    padding: 0 $padding 0 $padding;
}

@mixin phoenix-mdc-button-outline-width(
    $outline-width,
    $padding: $phoenix-navbar-button-contained-horizontal-padding
) {
    // Note: Adjust padding to maintain consistent width with non-outlined buttons
    $padding-value: max($padding - $outline-width, 0);

    @include phoenix-mdc-button-horizontal-padding($padding-value);

    border-width: $outline-width;
}

@mixin phoenix-mdc-button-base_() {
    @include phoenix-mdc-typography(button);
    @include phoenix-mdc-ripple-surface;
    @include phoenix-mdc-ripple-radius-bounded;
    @include phoenix-mdc-button-horizontal-padding($phoenix-navbar-button-horizontal-padding);

    display: inline-flex;
    position: relative;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    min-width: 64px;
    height: $phoenix-navbar-button-height;
    border: none;
    outline: none;

    /* @alternate */
    line-height: inherit;
    user-select: none;
    -webkit-appearance: none;
    overflow: hidden;
    vertical-align: middle;

    &::-moz-focus-inner {
        padding: 0;
        border: 0;
    }

    // postcss-bem-linter: ignore
    &:active {
        outline: none;
    }

    &:hover {
        cursor: pointer;
    }

    &:disabled {
        @include phoenix-mdc-theme-prop(background-color, transparent);

        color: $phoenix-navbar-button-disabled-ink-color;
        cursor: default;
        pointer-events: none;
    }
}

@mixin phoenix-mdc-button__icon_ {
    @include phoenix-mdc-rtl-reflexive-box(margin, right, 8px);

    display: inline-block;
    width: 18px;
    height: 18px;
    font-size: 18px;
    vertical-align: top;
}

@mixin phoenix-mdc-button__icon-svg_ {
    fill: currentColor;
}

@mixin phoenix-mdc-button__icon-contained_ {
    @include phoenix-mdc-rtl-reflexive-property(margin, -4px, 8px);
}

@mixin phoenix-mdc-button--outlined_() {
    border-style: solid;

    &:disabled {
        border-color: $phoenix-navbar-button-disabled-ink-color;
    }
}

@mixin phoenix-mdc-button--filled_() {
    @include phoenix-mdc-button-horizontal-padding(
        $phoenix-navbar-button-contained-horizontal-padding
    );

    &:disabled {
        background-color: rgba(phoenix-mdc-theme-prop-value(on-surface), 0.12);
        color: $phoenix-navbar-button-disabled-ink-color;
    }
}

@mixin phoenix-mdc-button--raised_() {
    @include phoenix-mdc-elevation(2);

    transition: phoenix-mdc-elevation-transition-value();

    &:hover,
    &:focus {
        @include phoenix-mdc-elevation(4);
    }

    &:active {
        @include phoenix-mdc-elevation(8);
    }

    &:disabled {
        @include phoenix-mdc-elevation(0);
    }
}

@mixin phoenix-mdc-button--dense_() {
    height: $phoenix-navbar-dense-button-height;
    font-size: 0.8125rem; // 13sp
}
