//
// Copyright 2017 Google Inc. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

@import './functions';

//
// Main theme colors for your brand.
//
// If you're a user customizing your color scheme in SASS, these are probably the only variables you need to change.
//

$phoenix-navbar-theme-primary: $phoenix-navbar-primary !default; // baseline purple, 500 tone
$phoenix-navbar-theme-on-primary: if(
    phoenix-mdc-theme-contrast-tone($phoenix-navbar-theme-primary) == 'dark',
    #000,
    #fff
) !default;

// The $phoenix-navbar-theme-accent variable is DEPRECATED - it exists purely for backward compatibility.
// The $phoenix-navbar-theme-secondary* variables should be used for all new projects.
$phoenix-navbar-theme-accent: $phoenix-navbar-secondary !default; // baseline teal, 600 tone
$phoenix-navbar-theme-secondary: $phoenix-navbar-theme-accent !default;
$phoenix-navbar-theme-on-secondary: if(
    phoenix-mdc-theme-contrast-tone($phoenix-navbar-theme-secondary) == 'dark',
    #000,
    #fff
) !default;
$phoenix-navbar-theme-background: #fff !default; // White

$phoenix-navbar-theme-surface: #fff !default;
$phoenix-navbar-theme-on-surface: if(
    phoenix-mdc-theme-contrast-tone($phoenix-navbar-theme-surface) == 'dark',
    #000,
    #fff
) !default;

//
// Text colors according to light vs dark and text type.
//

$phoenix-navbar-theme-text-colors: (
    dark: (
        primary: rgba(black, 0.87),
        secondary: rgba(black, 0.54),
        hint: rgba(black, 0.38),
        disabled: rgba(black, 0.38),
        icon: rgba(black, 0.38)
    ),
    light: (
        primary: white,
        secondary: rgba(white, 0.7),
        hint: rgba(white, 0.5),
        disabled: rgba(white, 0.5),
        icon: rgba(white, 0.5)
    )
) !default;

@function phoenix-mdc-theme-ink-color-for-fill_($text-style, $fill-color) {
    $contrast-tone: phoenix-mdc-theme-contrast-tone($fill-color);

    @return map-get(map-get($phoenix-navbar-theme-text-colors, $contrast-tone), $text-style);
}

//
// Primary text colors for each of the theme colors.
//

$phoenix-navbar-theme-property-values: (
    // Primary
        primary: $phoenix-navbar-theme-primary,
    // Secondary
        secondary: $phoenix-navbar-theme-secondary,
    // Background
        background: $phoenix-navbar-theme-background,
    // Surface
        surface: $phoenix-navbar-theme-surface,
    on-primary: $phoenix-navbar-theme-on-primary,
    on-secondary: $phoenix-navbar-theme-on-secondary,
    on-surface: $phoenix-navbar-theme-on-surface,
    // Text-primary on "background" background
        text-primary-on-background:
        phoenix-mdc-theme-ink-color-for-fill_(primary, $phoenix-navbar-theme-background),
    text-secondary-on-background:
        phoenix-mdc-theme-ink-color-for-fill_(secondary, $phoenix-navbar-theme-background),
    text-hint-on-background:
        phoenix-mdc-theme-ink-color-for-fill_(hint, $phoenix-navbar-theme-background),
    text-disabled-on-background:
        phoenix-mdc-theme-ink-color-for-fill_(disabled, $phoenix-navbar-theme-background),
    text-icon-on-background:
        phoenix-mdc-theme-ink-color-for-fill_(icon, $phoenix-navbar-theme-background),
    text-primary-on-light: phoenix-mdc-theme-ink-color-for-fill_(primary, light),
    text-secondary-on-light: phoenix-mdc-theme-ink-color-for-fill_(secondary, light),
    text-hint-on-light: phoenix-mdc-theme-ink-color-for-fill_(hint, light),
    text-disabled-on-light: phoenix-mdc-theme-ink-color-for-fill_(disabled, light),
    text-icon-on-light: phoenix-mdc-theme-ink-color-for-fill_(icon, light),
    text-primary-on-dark: phoenix-mdc-theme-ink-color-for-fill_(primary, dark),
    text-secondary-on-dark: phoenix-mdc-theme-ink-color-for-fill_(secondary, dark),
    text-hint-on-dark: phoenix-mdc-theme-ink-color-for-fill_(hint, dark),
    text-disabled-on-dark: phoenix-mdc-theme-ink-color-for-fill_(disabled, dark),
    text-icon-on-dark: phoenix-mdc-theme-ink-color-for-fill_(icon, dark)
);

// If `$property` is a literal color value (e.g., `blue`, `#fff`), it is returned verbatim. Otherwise, the value of the
// corresponding theme property (from `$phoenix-navbar-theme-property-values`) is returned. If `$property` is not a color and no
// such theme property exists, an error is thrown.
//
// This is mainly useful in situations where `phoenix-mdc-theme-prop` cannot be used directly (e.g., `box-shadow`).
//
// Examples:
//
// 1. phoenix-mdc-theme-prop-value(primary) => "#3f51b5"
// 2. phoenix-mdc-theme-prop-value(blue)    => "blue"
//
// NOTE: This function must be defined in _variables.scss instead of _functions.scss to avoid circular imports.
@function phoenix-mdc-theme-prop-value($property) {
    @if type-of($property) == 'color' or $property == 'currentColor' {
        @return $property;
    }

    @if not map-has-key($phoenix-navbar-theme-property-values, $property) {
        @error "Invalid theme property: '#{$property}'. Choose one of: #{map-keys($phoenix-navbar-theme-property-values)}";
    }

    @return map-get($phoenix-navbar-theme-property-values, $property);
}

// NOTE: This function must be defined in _variables.scss instead of _functions.scss to avoid circular imports.
@function phoenix-mdc-theme-accessible-ink-color($fill-color, $text-style: primary) {
    $fill-color-value: phoenix-mdc-theme-prop-value($fill-color);
    $color-map-for-tone: map-get(
        $phoenix-navbar-theme-text-colors,
        phoenix-mdc-theme-contrast-tone($fill-color-value)
    );

    @if not map-has-key($color-map-for-tone, $text-style) {
        @error "Invalid $text-style: '#{$text-style}'. Choose one of: #{map-keys($color-map-for-tone)}";
    }

    @return map-get($color-map-for-tone, $text-style);
}
