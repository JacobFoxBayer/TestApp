//
// Copyright 2017 Google Inc. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

@import '../animation/variables';
@import '../floating-label/floating-label';
@import '../line-ripple/line-ripple';
@import '../notched-outline/notched-outline';
@import '../ripple/common';
@import '../ripple/mixins';
@import '../rtl/mixins';
@import '../theme/variables';
@import '../typography/mixins';
@import '../typography/variables';
@import './functions';
@import './helper-text/helper-text';
@import './icon/icon';
@import './mixins';
@import './variables';

// postcss-bem-linter: define text-field

.phoenix-mdc-text-field {
    @include phoenix-mdc-text-field-bottom-line-color($phoenix-mdc-text-field-bottom-line-idle);
    @include phoenix-mdc-text-field-hover-bottom-line-color(
        $phoenix-mdc-text-field-bottom-line-hover
    );
    @include phoenix-mdc-text-field-line-ripple-color_(primary);
    @include phoenix-mdc-text-field-ink-color($phoenix-mdc-text-field-ink-color);
    @include phoenix-mdc-text-field-label-color($phoenix-mdc-text-field-label);
    @include phoenix-mdc-text-field-helper-text-color($phoenix-mdc-text-field-helper-text-color);
    @include phoenix-mdc-text-field-fullwidth-bottom-line-color(
        $phoenix-mdc-text-field-fullwidth-bottom-line-color
    );
    @include phoenix-mdc-text-field-icon-color($phoenix-mdc-text-field-icon-color);
    @include phoenix-mdc-text-field-caret-color(primary);

    display: inline-block;
    position: relative;
    margin-bottom: 8px;
    will-change: opacity, transform, color;
}

.phoenix-mdc-text-field__input {
    @include phoenix-mdc-typography(subtitle1);

    width: 100%;
    height: 30px;
    padding: 20px 0 1px;
    transition: phoenix-mdc-text-field-transition(opacity);
    border: none;
    border-bottom: 1px solid;
    border-radius: 0;
    background: none;
    appearance: none;

    &::placeholder {
        transition: phoenix-mdc-text-field-transition(color);
        opacity: 1;
    }

    &:focus {
        outline: none;
    }

    // Remove red outline on firefox
    &:invalid {
        box-shadow: none;
    }

    // Move label when text-field gets autofilled in Chrome
    // stylelint-disable plugin/selector-bem-pattern
    &:-webkit-autofill + .phoenix-mdc-floating-label {
        transform: translateY(-100%) scale(0.75);
        cursor: auto;
    }
    // stylelint-enable plugin/selector-bem-pattern
}

.phoenix-mdc-text-field--outlined {
    @include phoenix-mdc-text-field-outlined_;
}

.phoenix-mdc-text-field--outlined.phoenix-mdc-text-field--focused {
    @include phoenix-mdc-text-field-outlined-focused_;
}

.phoenix-mdc-text-field--outlined.phoenix-mdc-text-field--disabled {
    @include phoenix-mdc-text-field-outlined-disabled_;
}

.phoenix-mdc-text-field--outlined.phoenix-mdc-text-field--dense {
    @include phoenix-mdc-text-field-outlined-dense_;
}

.phoenix-mdc-text-field--box {
    @include phoenix-mdc-text-field-box_;
}

.phoenix-mdc-text-field--box.phoenix-mdc-text-field--disabled {
    @include phoenix-mdc-text-field-box-disabled_;
}

.phoenix-mdc-text-field--box.phoenix-mdc-text-field--dense {
    @include phoenix-mdc-text-field-box-dense_;
}

.phoenix-mdc-text-field--with-leading-icon {
    @include phoenix-mdc-text-field-with-leading-icon_;
}

.phoenix-mdc-text-field--with-leading-icon.phoenix-mdc-text-field--outlined {
    @include phoenix-mdc-text-field-outlined-with-leading-icon_;
}

.phoenix-mdc-text-field--with-leading-icon.phoenix-mdc-text-field--outlined.phoenix-mdc-text-field--dense {
    @include phoenix-mdc-text-field-outlined-dense-with-leading-icon_;
}

.phoenix-mdc-text-field--with-trailing-icon {
    @include phoenix-mdc-text-field-with-trailing-icon_;
}

// stylelint-disable plugin/selector-bem-pattern
.phoenix-mdc-text-field--with-leading-icon.phoenix-mdc-text-field--dense
    .phoenix-mdc-text-field__icon,
.phoenix-mdc-text-field--with-trailing-icon.phoenix-mdc-text-field--dense
    .phoenix-mdc-text-field__icon {
    bottom: 16px;
    transform: scale(0.8);
}
// stylelint-enable plugin/selector-bem-pattern

.phoenix-mdc-text-field--with-leading-icon.phoenix-mdc-text-field--dense {
    @include phoenix-mdc-text-field-dense-with-leading-icon_;
}

.phoenix-mdc-text-field--with-trailing-icon.phoenix-mdc-text-field--dense {
    @include phoenix-mdc-text-field-dense-with-trailing-icon_;
}

.phoenix-mdc-text-field--upgraded:not(.phoenix-mdc-text-field--fullwidth):not(.phoenix-mdc-text-field--box) {
    display: inline-flex;
    position: relative;
    align-items: flex-end;
    box-sizing: border-box;
    margin-top: 16px;

    // stylelint-disable-next-line selector-max-specificity
    &:not(.phoenix-mdc-text-field--textarea):not(.phoenix-mdc-text-field--outlined) {
        height: 48px;
    }
}

.phoenix-mdc-text-field--dense {
    @include phoenix-mdc-text-field-dense_;
}

@include phoenix-mdc-required-text-field-label-asterisk_ {
    margin-left: 1px;
    content: '*';
}

.phoenix-mdc-text-field--textarea {
    @include phoenix-mdc-text-field-textarea_;
}

.phoenix-mdc-text-field--fullwidth {
    @include phoenix-mdc-text-field-fullwidth_;
}

.phoenix-mdc-text-field--fullwidth.phoenix-mdc-text-field--invalid {
    @include phoenix-mdc-text-field-fullwidth-invalid_;
}

// postcss-bem-linter: define text-field-helper-text

.phoenix-mdc-text-field-helper-text {
    // stylelint-disable plugin/selector-bem-pattern
    .phoenix-mdc-text-field--dense + & {
        margin-bottom: 4px;
    }

    .phoenix-mdc-text-field--box + &,
    .phoenix-mdc-text-field--outlined + & {
        margin-right: 16px;
        margin-left: 16px;
    }

    // stylelint-enable plugin/selector-bem-pattern
}

// postcss-bem-linter: end

// phoenix-mdc-form-field tweaks to align text field label correctly
// stylelint-disable selector-max-type
.phoenix-mdc-form-field > .phoenix-mdc-text-field + label {
    align-self: flex-start;
}
// stylelint-enable selector-max-type

.phoenix-mdc-text-field--focused {
    @include phoenix-mdc-text-field-focused_;
}

.phoenix-mdc-text-field--textarea.phoenix-mdc-text-field--focused {
    @include phoenix-mdc-text-field-textarea-stroke-color(primary);
}

.phoenix-mdc-text-field--invalid {
    @include phoenix-mdc-text-field-invalid_;
}

.phoenix-mdc-text-field--textarea.phoenix-mdc-text-field--invalid {
    @include phoenix-mdc-text-field-textarea-invalid_;
}

.phoenix-mdc-text-field--outlined.phoenix-mdc-text-field--invalid {
    @include phoenix-mdc-text-field-outlined-invalid_;
}

.phoenix-mdc-text-field--disabled {
    @include phoenix-mdc-text-field-disabled_;
}

.phoenix-mdc-text-field--textarea.phoenix-mdc-text-field--disabled {
    @include phoenix-mdc-text-field-textarea-disabled_;
}

@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-box,
    $phoenix-mdc-text-field-box-label-position-y
);
@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-box-dense,
    $phoenix-mdc-text-field-box-dense-label-position-y,
    0%,
    $phoenix-mdc-text-field-dense-label-scale
);
@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-outlined,
    $phoenix-mdc-text-field-outlined-label-position-y
);
@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-outlined-dense,
    $phoenix-mdc-text-field-outlined-dense-label-position-y,
    0%,
    $phoenix-mdc-text-field-dense-label-scale
);
@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-outlined-leading-icon,
    $phoenix-mdc-text-field-outlined-label-position-y,
    $phoenix-mdc-text-field-outlined-with-leading-icon-label-position-x
);
@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-outlined-leading-icon-dense,
    $phoenix-mdc-text-field-outlined-dense-label-position-y,
    $phoenix-mdc-text-field-outlined-dense-with-leading-icon-label-position-x,
    $phoenix-mdc-text-field-dense-label-scale
);
@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-outlined-leading-icon-rtl,
    $phoenix-mdc-text-field-outlined-label-position-y,
    -$phoenix-mdc-text-field-outlined-with-leading-icon-label-position-x
);
@include phoenix-mdc-floating-label-shake-keyframes(
    text-field-outlined-leading-icon-dense-rtl,
    $phoenix-mdc-text-field-outlined-dense-label-position-y,
    -$phoenix-mdc-text-field-outlined-dense-with-leading-icon-label-position-x,
    $phoenix-mdc-text-field-dense-label-scale
);
@include phoenix-mdc-floating-label-shake-keyframes(
    textarea,
    $phoenix-mdc-text-field-textarea-label-position-y,
    0%,
    $phoenix-mdc-text-field-textarea-label-scale
);

#textarea {
    background-color: whitesmoke;
    border-top: 0 !important;
    border-left: 0 !important;
    border-right: 0 !important;
}

#textarea:hover {
    background-color: rgba(0, 0, 0, 0.08);
}

#textarea:focus {
    background-color: rgba(0, 0, 0, 0.1);
}

.textarea-container {
    border-top: 0 !important;
    border-left: 0 !important;
    border-right: 0 !important;
    width: 100%;
}
