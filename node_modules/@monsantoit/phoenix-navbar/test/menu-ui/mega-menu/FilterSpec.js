import {filter} from '../../../menu-ui/scripts/mega-menu/suite-panel/ProductList'

describe('ProductList filtering', () => {
    const unfilteredTree = [
        {
            title: 'System',
            products: [
                {title: 'Some other product', sections: []},
                {
                    title: 'User Profile',
                    sections: [
                        {
                            title: 'Configuration',
                            locations: [
                                {title: 'Create Application'},
                                {title: 'Create User Group'},
                                {title: 'Some Other Location'}
                            ]
                        }
                    ]
                }
            ]
        }
    ]
    const propertyHierarcy = ['products', 'sections', 'locations']

    it('returns nothing on a miss', () => {
        filter(unfilteredTree, propertyHierarcy, 'No match').should.eql([])
    })

    it('returns everything when no search string', () => {
        filter(unfilteredTree, propertyHierarcy, '  ').should.eql(unfilteredTree)
    })

    it('matches on top level menu', () => {
        filter(unfilteredTree, propertyHierarcy, 'User Profile').should.eql([
            {
                title: 'System',
                products: [{title: 'User Profile', sections: []}]
            }
        ])
    })

    it('may match multiple results', () => {
        filter(unfilteredTree, propertyHierarcy, 'Create').should.eql([
            {
                title: 'System',
                products: [
                    {
                        title: 'User Profile',
                        sections: [
                            {
                                title: 'Configuration',
                                locations: [
                                    {title: 'Create Application'},
                                    {title: 'Create User Group'}
                                ]
                            }
                        ]
                    }
                ]
            }
        ])
    })

    it('matches on multiple non-consecutive words', () => {
        filter(unfilteredTree, propertyHierarcy, 'Create User').should.eql([
            {
                title: 'System',
                products: [
                    {
                        title: 'User Profile',
                        sections: [
                            {
                                title: 'Configuration',
                                locations: [{title: 'Create User Group'}]
                            }
                        ]
                    }
                ]
            }
        ])
    })
})
