"use strict";

var namespace = require('./namespace');

var browser = require('./browser');

var _ = require('../lodash'); // profile-client settings, derived from browser globals


var settings = {
  debuggerEnabled: function debuggerEnabled() {
    return namespace.get('debugProfileClient', false);
  },
  refreshEnabled: function refreshEnabled() {
    return namespace.get('refreshEnabled', true);
  },
  authEnabled: function authEnabled() {
    var notLocalDevelopment = browser.localDevelopment() === false;
    var localOcelot = browser.localOcelot() === true;
    return notLocalDevelopment || localOcelot;
  },
  retryInterval: function retryInterval() {
    return 1000 * 5;
  },
  tokenFromCookie: function tokenFromCookie(name) {
    var cookiePairs = _.get(browser.document(), 'cookie', '').split(';').map(function (cookie) {
      return cookie.trim().split('=');
    });

    var cookieMap = _.fromPairs(cookiePairs);

    if (_.has(cookieMap, name)) {
      return cookieMap[name];
    }

    return null;
  }
};
module.exports = settings;