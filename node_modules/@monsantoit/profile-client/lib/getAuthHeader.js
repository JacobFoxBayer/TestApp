"use strict";

/* eslint-disable no-use-before-define */
var settings = require('./safe/settings');
var namespace = require('./safe/namespace');
var readMeUrl = 'https://github.platforms.engineering/Velocity/profile-client';
var defaultHeader = function defaultHeader() {
  // next major version, inline into getAuthHeader.
  if (settings.authEnabled() && !getAuthHeader.logged) {
    console.error("Profile Client: Auth token support not enabled. See ".concat(readMeUrl));
    getAuthHeader.logged = true;
  }
  return {};
};
var getAuthHeader = function getAuthHeader() {
  return namespace.get('authHeader', defaultHeader)();
};
getAuthHeader.setValue = function (headers) {
  return namespace.set('authHeader', function () {
    return headers;
  });
};
getAuthHeader.logged = false;
getAuthHeader.init = function () {
  console.warn("Profile Client: getAuthHeader.init is no longer required, and will be removed in a later version.");
  return defaultHeader();
};
module.exports = getAuthHeader;